
{% extends "base.html" %}
{% block content %}
<h1>ML Pipeline</h1>
<section class="card">
  <h2>Train Model</h2>
  <div class="grid-2">
    <label>Dataset name <input id="ml-dataset" placeholder="dataset_2023_..."></label>
    <label>Model type
      <select id="ml-model">
        <option value="pattern_net">pattern_net</option>
        <option value="transformer">transformer</option>
        <option value="vae">vae</option>
      </select>
    </label>
    <label>Epochs <input id="ml-epochs" type="number" value="50"></label>
    <label>Batch size <input id="ml-batch" type="number" value="32"></label>
    <label>Learning rate <input id="ml-lr" type="number" step="0.0001" value="0.001"></label>
    <label>Validation split <input id="ml-val" type="number" step="0.01" value="0.2"></label>
  </div>
  <button class="btn primary" onclick="submitMLTrain()">Start Training</button>
  <pre id="ml-train-status" class="mini pre"></pre>
</section>
<section class="card">
  <h2>Generate with Trained Model</h2>
  <div class="grid-2">
    <label>Model path <input id="gen-model-path" placeholder="jobid_pattern.pth"></label>
    <label>n_samples <input id="gen-samples" type="number" value="10"></label>
    <label>Temperature <input id="gen-temp" type="number" step="0.1" value="0.8"></label>
  </div>
  <button class="btn" onclick="submitMLGenerate()">Generate</button>
  <pre id="ml-gen-status" class="mini pre"></pre>
</section>
<section class="card">
  <h2>Available Models</h2>
  <button class="btn" onclick="loadModels()">Refresh</button>
  <table class="table" id="models-table"><thead><tr><th>Name</th><th>Size</th><th>Created</th></tr></thead><tbody></tbody></table>
</section>
{% endblock %}
